<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>For Diana ğŸ¤</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      background: linear-gradient(160deg, #1a0a2e 0%, #2d1045 40%, #1a0a2e 100%);
      font-family: 'Lato', sans-serif;
      overflow-x: hidden;
      color: #f0d6ff;
    }

    /* â”€â”€ Falling hearts & sparkles canvas â”€â”€ */
    #canvas {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    /* â”€â”€ Main layout â”€â”€ */
    .page {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 40px 20px 60px;
      gap: 50px;
    }

    /* â”€â”€ Hero card â”€â”€ */
    .hero {
      background: rgba(255,255,255,0.07);
      backdrop-filter: blur(14px);
      border: 1px solid rgba(220,160,255,0.25);
      border-radius: 30px;
      padding: 50px 45px;
      max-width: 680px;
      width: 100%;
      text-align: center;
      box-shadow: 0 8px 40px rgba(180,80,255,0.15);
      animation: floatIn 1.1s cubic-bezier(.22,1,.36,1) both;
    }

    @keyframes floatIn {
      from { opacity: 0; transform: translateY(40px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .hero .label {
      font-size: 0.78rem;
      letter-spacing: 4px;
      text-transform: uppercase;
      color: #d4a0ff;
      margin-bottom: 14px;
    }

    .hero h1 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2.2rem, 6vw, 3.4rem);
      line-height: 1.15;
      color: #f0d6ff;
      margin-bottom: 24px;
    }

    .hero h1 span { font-style: italic; color: #e0aaff; }

    .hero .oneliner {
      font-family: 'Playfair Display', serif;
      font-style: italic;
      font-size: clamp(1.05rem, 2.8vw, 1.3rem);
      line-height: 1.7;
      color: #d4b8f0;
      margin-bottom: 28px;
      padding: 0 10px;
    }

    .hero .from {
      font-size: 0.88rem;
      letter-spacing: 2px;
      color: #d4a0ff;
    }

    /* â”€â”€ Forgiveness section â”€â”€ */
    .forgive-section {
      max-width: 680px;
      width: 100%;
      text-align: center;
      animation: floatIn 1.1s 0.15s cubic-bezier(.22,1,.36,1) both;
    }

    .forgive-section h2 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.4rem, 4vw, 2rem);
      color: #e0aaff;
      margin-bottom: 18px;
    }

    .forgive-section p {
      font-size: clamp(0.95rem, 2.5vw, 1.1rem);
      line-height: 1.85;
      color: #c9b3e0;
    }

    /* â”€â”€ Video wrapper â”€â”€ */
    .video-wrap {
      max-width: 720px;
      width: 100%;
      animation: floatIn 1.1s 0.25s cubic-bezier(.22,1,.36,1) both;
    }

    .video-wrap h2 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.1rem, 3vw, 1.5rem);
      color: #e0aaff;
      text-align: center;
      margin-bottom: 16px;
    }

    .video-frame {
      position: relative;
      padding-bottom: 56.25%;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 8px 40px rgba(180,80,255,0.3);
      border: 1px solid rgba(220,160,255,0.2);
    }

    .video-frame iframe {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      border: none;
    }

    /* â”€â”€ Reason cards â”€â”€ */
    .reasons-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.4rem, 4vw, 2rem);
      color: #e0aaff;
      text-align: center;
      animation: floatIn 1.1s 0.35s cubic-bezier(.22,1,.36,1) both;
    }

    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      max-width: 780px;
      width: 100%;
      animation: floatIn 1.1s 0.45s cubic-bezier(.22,1,.36,1) both;
    }

    .card {
      background: rgba(255,255,255,0.06);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(220,160,255,0.2);
      border-radius: 22px;
      padding: 28px 22px;
      text-align: center;
      transition: transform 0.25s, box-shadow 0.25s;
      box-shadow: 0 4px 20px rgba(180,80,255,0.1);
    }

    .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 30px rgba(180,80,255,0.25);
    }

    .card .emoji { font-size: 2.2rem; margin-bottom: 12px; }

    .card h3 {
      font-family: 'Playfair Display', serif;
      font-size: 1.05rem;
      color: #e0aaff;
      margin-bottom: 8px;
    }

    .card p {
      font-size: 0.9rem;
      line-height: 1.6;
      color: #c9b3e0;
    }

    /* â”€â”€ Pixel game â”€â”€ */
    .game-section {
      max-width: 720px;
      width: 100%;
      text-align: center;
      animation: floatIn 1.1s 0.55s cubic-bezier(.22,1,.36,1) both;
    }
    .game-section h2 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.2rem, 3.5vw, 1.7rem);
      color: #e0aaff;
      margin-bottom: 8px;
    }
    .game-section .game-hint {
      font-size: 0.82rem;
      color: #b89fd0;
      margin-bottom: 16px;
      letter-spacing: 1px;
    }
    #gameCanvas {
      border-radius: 16px;
      border: 2px solid rgba(220,160,255,0.3);
      box-shadow: 0 8px 40px rgba(180,80,255,0.25);
      image-rendering: pixelated;
      max-width: 100%;
      display: block;
      margin: 0 auto;
    }

    /* â”€â”€ Rose divider â”€â”€ */
    .rose-divider {
      color: #c084fc;
      font-size: 1.3rem;
      letter-spacing: 8px;
      opacity: 0.7;
    }

    /* â”€â”€ Footer â”€â”€ */
    footer {
      font-size: 0.8rem;
      color: #d4a0ff;
      letter-spacing: 1.5px;
      animation: floatIn 1.1s 0.6s cubic-bezier(.22,1,.36,1) both;
    }
  </style>
</head>
<body>

<canvas id="canvas"></canvas>

<div class="page">

  <!-- Hero -->
  <div class="hero">
    <p class="label">ğŸŒ¹ just for you ğŸŒ¹</p>
    <h1>Hey, <span>Diana Munoz</span> ğŸŒ¸</h1>
    <p class="oneliner">
      "I don't know everything about you yet â€” but what I do know already has me thinking you're something genuinely special."
    </p>
    <p class="from">Josue Arteaga ğŸ¤</p>
  </div>

  <p class="rose-divider">ğŸŒ¹ ğŸŒ¸ ğŸŒ¹ ğŸŒ¸ ğŸŒ¹</p>

  <!-- Getting to know you -->
  <div class="forgive-section">
    <h2>âœ¨ Something I want you to know</h2>
    <p>
      I saw you on Instagram and something about you just made me want to say something.
      I'm glad I did. I know things between us haven't always been easy and I'm not
      going to pretend otherwise. But through all of that I still find myself wanting
      to get to know you more. Talking to you when it's good is genuinely one of
      my favorite things. You're easy to talk to, you make me laugh, and your energy
      is different from anyone else I've come across. I don't know everything about
      you yet and honestly that's the part I'm looking forward to. I just want you
      to know that I see you, I appreciate you, and I'm not going anywhere. ğŸ¤
    </p>
  </div>

  <p class="rose-divider">ğŸŒ¹ ğŸŒ¸ ğŸŒ¹ ğŸŒ¸ ğŸŒ¹</p>

  <!-- Video -->
  <div class="video-wrap">
    <h2>ğŸµ I put this on here for a reason</h2>
    <div class="video-frame">
      <iframe
        src="https://www.youtube.com/embed/Ne88lZm13e0?rel=0"
        title="A song for Diana"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen>
      </iframe>
    </div>
  </div>

  <p class="rose-divider">ğŸŒ¹ ğŸŒ¸ ğŸŒ¹ ğŸŒ¸ ğŸŒ¹</p>

  <!-- Reason section -->
  <h2 class="reasons-title">Why you're a 1 of 1 ğŸŒ¹</h2>

  <div class="cards">
    <div class="card">
      <div class="emoji">ğŸ™</div>
      <h3>She's a Godly woman</h3>
      <p>That faith is not something you find everywhere. A woman who's grounded like that is genuinely special and it shows in how you carry yourself.</p>
    </div>
    <div class="card">
      <div class="emoji">ğŸ˜‚</div>
      <h3>That laugh tho</h3>
      <p>I'm not exaggerating when I say your laugh on the phone is one of my favorite things. It's contagious and you probably don't even realize it.</p>
    </div>
    <div class="card">
      <div class="emoji">ğŸ’†</div>
      <h3>She's an esthetician</h3>
      <p>Taking care of people, making them feel good and confident in their skin. That says a lot about your heart. Plus you literally glow ğŸ˜</p>
    </div>
    <div class="card">
      <div class="emoji">ğŸ¹</div>
      <h3>She bartends too</h3>
      <p>We literally do the same thing for a living and I respect it. You know how to handle a room, keep up with people and hold your own. That's something I genuinely admire.</p>
    </div>
    <div class="card">
      <div class="emoji">ğŸ¯</div>
      <h3>Ambitious and driven</h3>
      <p>Bartending AND esthetics? You're out here building something. That work ethic is genuinely one of the most attractive things about you.</p>
    </div>
    <div class="card">
      <div class="emoji">ğŸŒ¹</div>
      <h3>She deserves flowers</h3>
      <p>A girl who appreciates the princess treatment â€” I see you and I'm taking notes. When the time is right, I've got you. ğŸŒ¹</p>
    </div>
  </div>

  <p class="rose-divider">ğŸŒ¹ ğŸŒ¸ ğŸŒ¹ ğŸŒ¸ ğŸŒ¹</p>

  <!-- Pixel animation -->
  <div class="game-section">
    <h2>ğŸ¬ a lil something for you</h2>
    <p class="game-hint">watch closely ğŸŒ¹</p>
    <canvas id="gameCanvas" width="520" height="260"></canvas>
  </div>

  <footer>made with ğŸŒ¹ by Josue, just for Diana. you're a 1 of 1.</footer>
</div>

<!-- Falling hearts & sparkles -->
<script>
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  let W, H, particles = [];
  function resize() { W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; }
  resize();
  window.addEventListener('resize', resize);
  const symbols = ['ğŸŒ¹','ğŸ’œ','âœ¨','ğŸŒ¸','ğŸª·','ğŸ’«','ğŸŒº','ğŸ©·'];
  function spawn() {
    return { x: Math.random()*W, y:-30, sym: symbols[Math.floor(Math.random()*symbols.length)],
      size: 14+Math.random()*18, speed: 0.8+Math.random()*1.4, drift:(Math.random()-0.5)*0.6,
      opacity: 0.55+Math.random()*0.45, rot:(Math.random()-0.5)*0.06, angle:0 };
  }
  for(let i=0;i<28;i++){const p=spawn();p.y=Math.random()*H;particles.push(p);}
  function draw() {
    ctx.clearRect(0,0,W,H);
    for(const p of particles){
      ctx.save();ctx.globalAlpha=p.opacity;ctx.font=`${p.size}px serif`;
      ctx.translate(p.x,p.y);ctx.rotate(p.angle);ctx.fillText(p.sym,0,0);ctx.restore();
      p.y+=p.speed;p.x+=p.drift;p.angle+=p.rot;
      if(p.y>H+30)Object.assign(p,spawn());
    }
    if(Math.random()<0.04)particles.push(spawn());
    if(particles.length>60)particles.splice(0,1);
    requestAnimationFrame(draw);
  }
  draw();
</script>


<!-- Pixel animation -->
<script>
(function () {
  const gc = document.getElementById('gameCanvas');
  const gx = gc.getContext('2d');
  const S = 4; // canvas 520x260 â†’ game space 130x65

  const groundY = 54;  // 54*4=216px
  const girlX   = 98;  // 98*4=392px

  // â”€â”€ Palette â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const C = {
    // light light brown skin (both chars)
    sk0:'#fce8cc', sk1:'#e8c898', sk2:'#d4a468', sk3:'#b07830', sk4:'#8a5a18',
    // dark hair
    hB:'#160500', hM:'#2e0e00', hH:'#4a1a00',
    // boy shirt (purple)
    sB:'#5b21b6', sL:'#7c3aed', sDk:'#3b0764', sHL:'#a78bfa',
    // boy pants
    pB:'#1e1b4b', pL:'#312e81', pDk:'#0f0c29',
    shoe:'#18181b', lace:'#e5e7eb', sole:'#374151',
    // girl dress (pink)
    dB:'#ec4899', dL:'#fda4cf', dDk:'#9d174d', dHL:'#fce7f3',
    // lips
    lip:'#be185d', lipH:'#f472b6',
    // eyes
    eyeW:'#f8fafc', iris:'#1d4ed8', pupil:'#0a0a0a',
    // rose bouquet
    rB:'#f43f5e', rL:'#fb7185', rDk:'#be123c',
    stm:'#16a34a', stmDk:'#14532d',
    // scene
    sky:'#0f0520', skyM:'#1a0a35',
    gnd:'#2a1248', gnd2:'#3b1f5e',
    gr1:'#3d2260', gr2:'#5a3490',
    moon:'#fef3c7', moonSh:'#fde68a', star:'#fef9c3',
    f1:'#006847', f2:'#ffffff', f3:'#ce1126',
    path:'#4a1d7a', pathB:'#5b2d8a',
    heartR:'#f43f5e', heartP:'#fb7185',
  };

  function px(x,y,w,h,c){ gx.fillStyle=c; gx.fillRect(x*S,y*S,w*S,h*S); }

  // â”€â”€ Bouquet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function drawBouquet(rx, ry) {
    // wrap
    px(rx+2,ry+9,8,6,C.dHL); px(rx+3,ry+14,6,1,C.dB);
    // stems
    px(rx+3,ry+6,1,5,C.stm);  px(rx+3,ry+6,1,1,C.stmDk);
    px(rx+6,ry+5,1,6,C.stm);
    px(rx+9,ry+6,1,5,C.stm);
    // leaves
    px(rx+2,ry+8,2,1,C.stm);  px(rx+8,ry+9,2,1,C.stm);
    // rose 1
    px(rx+1,ry+3,4,3,C.rDk);  px(rx+2,ry+2,2,1,C.rB);
    px(rx+1,ry+3,4,3,C.rB);   px(rx+2,ry+2,2,3,C.rL);  px(rx+3,ry+1,1,2,C.rL);
    // rose 2 (taller)
    px(rx+5,ry+1,4,3,C.rDk);  px(rx+6,ry+0,2,1,C.rB);
    px(rx+5,ry+1,4,3,C.rB);   px(rx+6,ry+0,2,3,C.rL);  px(rx+7,ry-1,1,2,C.rL);
    // rose 3
    px(rx+8,ry+3,4,3,C.rDk);  px(rx+9,ry+2,2,1,C.rB);
    px(rx+8,ry+3,4,3,C.rB);   px(rx+9,ry+2,2,3,C.rL);  px(rx+10,ry+1,1,2,C.rL);
  }

  // â”€â”€ Background â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function drawBg() {
    for(let r=0;r<groundY;r++){
      gx.fillStyle=r<groundY*0.45?C.sky:C.skyM;
      gx.fillRect(0,r*S,gc.width,S);
    }
    // moon glow
    gx.shadowColor='#fef3c7'; gx.shadowBlur=14*S;
    px(18,4,8,8,C.moon);
    px(19,3,6,1,C.moon); px(19,12,6,1,C.moon);
    px(17,6,1,4,C.moon); px(26,6,1,4,C.moon);
    px(20,6,2,2,C.moonSh);
    gx.shadowBlur=0;
    // stars
    [[4,2],[22,5],[38,1],[52,7],[66,3],[78,6],[90,2],[102,7],[112,4],[8,12],[30,10],[60,11],[88,9],[118,3]].forEach(([sx,sy])=>{
      px(sx,sy,1,1,C.star);
    });
    // flag
    px(120,2,2,6,C.f1); px(122,2,2,6,C.f2); px(124,2,2,6,C.f3); px(119,1,1,8,'#555');
    // ground
    gx.fillStyle=C.gnd2; gx.fillRect(0,groundY*S,gc.width,gc.height-groundY*S);
    gx.fillStyle=C.gnd;  gx.fillRect(0,(groundY+3)*S,gc.width,gc.height-(groundY+3)*S);
    gx.fillStyle=C.gr1;  gx.fillRect(0,groundY*S,gc.width,2*S);
    gx.fillStyle=C.gr2;  gx.fillRect(0,(groundY+1)*S,gc.width,S);
    for(let i=0;i<22;i++){ px(i*6,groundY-1,1,2,C.gr2); px(i*6+3,groundY-1,1,1,C.gr1); }
    for(let i=0;i<15;i++){ const a=i%2; px(3+i*8,groundY+3,6,2,a?C.path:C.pathB); }
    // side rose bushes
    [[1,groundY-7],[6,groundY-5],[114,groundY-7],[119,groundY-5]].forEach(([rx,ry])=>{
      px(rx+1,ry+4,1,3,C.stm); px(rx,ry+1,4,3,C.rDk); px(rx+1,ry,2,3,C.rB); px(rx+2,ry-1,1,2,C.rL);
    });
  }

  // â”€â”€ Boy â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function drawBoy(bx, phase, f) {
    const x = Math.round(bx);
    const y = groundY - 42;
    const wf = (phase==='walk') ? Math.floor(f/4)%4 : 0;
    // leg/arm swing
    const lL=[0,3,0,-2][wf], lR=[0,-2,0,3][wf];
    const aL=[0,-2,0,2][wf], aR=[0,2,0,-2][wf];
    const bob=(phase==='walk')?(Math.floor(f/4)%2?1:0):0;

    // shadow
    gx.globalAlpha=0.2; gx.fillStyle='#000';
    gx.fillRect((x+2)*S,(groundY+1)*S,14*S,S); gx.globalAlpha=1;

    // â”€â”€ shoes â”€â”€
    px(x+1,y+40,6,2,C.shoe); px(x+1,y+41,7,1,C.sole);
    px(x+2,y+40,1,1,C.lace); px(x+4,y+40,1,1,C.lace);
    px(x+9,y+40,6,2,C.shoe); px(x+9,y+41,7,1,C.sole);
    px(x+10,y+40,1,1,C.lace); px(x+12,y+40,1,1,C.lace);

    // â”€â”€ pants (legs) â”€â”€
    // left leg
    px(x+2,y+23+lL+bob,4,17,C.pB);
    px(x+2,y+23+lL+bob,1,17,C.pDk); px(x+5,y+23+lL+bob,1,17,C.pL);
    px(x+2,y+31+lL+bob,4,3,C.pL); // knee
    // right leg
    px(x+10,y+23+lR+bob,4,17,C.pB);
    px(x+13,y+23+lR+bob,1,17,C.pDk); px(x+10,y+23+lR+bob,1,17,C.pL);
    px(x+10,y+31+lR+bob,4,3,C.pL);

    // â”€â”€ belt â”€â”€
    px(x+2,y+22+bob,14,2,'#1c0f00');
    px(x+7,y+22+bob,4,2,'#78340f'); px(x+8,y+22+bob,2,2,'#ca8a04'); // buckle

    // â”€â”€ shirt â”€â”€
    px(x+2,y+9+bob,14,13,C.sB);
    px(x+2,y+9+bob,2,13,C.sDk);   px(x+14,y+9+bob,2,13,C.sDk);
    px(x+4,y+9+bob,10,4,C.sL);    // upper highlight
    px(x+2,y+18+bob,14,4,C.sDk);  // lower shadow
    // buttons
    px(x+8,y+11+bob,2,1,C.sHL); px(x+8,y+14+bob,2,1,C.sHL); px(x+8,y+17+bob,2,1,C.sHL);
    // collar
    px(x+5,y+8+bob,8,2,C.sL);
    px(x+7,y+7+bob,4,3,C.sL);
    px(x+8,y+9+bob,2,4,C.dHL); // collar V opening

    // â”€â”€ arms â”€â”€
    if(phase==='kiss'||phase==='heart'){
      px(x+14,y+10+bob,5,4,C.sk2);
      px(x+0,y+11+bob,3,9,C.sk2); px(x+0,y+11+bob,1,9,C.sk3);
      px(x+14,y+10+bob,1,4,C.sk3);
    } else if(phase==='offer'){
      px(x+14,y+6+bob,3,8,C.sk2);   px(x+15,y+4+bob,2,5,C.sk2);
      px(x+14,y+6+bob,1,8,C.sk3);
      drawBouquet(x+15,y-5+bob);
      px(x+0,y+11+bob,3,9,C.sk2);   px(x+0,y+11+bob,1,9,C.sk3);
    } else {
      px(x+0+aL,y+11+bob,3,9,C.sk2); px(x+0+aL,y+11+bob,1,9,C.sk3);
      px(x+14+aR,y+11+bob,3,9,C.sk2); px(x+15+aR,y+11+bob,1,9,C.sk3);
    }

    // â”€â”€ neck â”€â”€
    px(x+7,y+5+bob,4,5,C.sk2);
    px(x+7,y+5+bob,1,5,C.sk3); px(x+10,y+5+bob,1,5,C.sk1);

    // â”€â”€ head â”€â”€
    px(x+4,y+0+bob,10,8,C.sk2);
    px(x+4,y+0+bob,1,8,C.sk3);  px(x+13,y+0+bob,1,8,C.sk3);
    px(x+6,y+0+bob,6,3,C.sk1);  // forehead highlight
    px(x+5,y+7+bob,8,2,C.sk2);  // jaw
    px(x+6,y+8+bob,6,1,C.sk3);  // chin

    // ears
    px(x+3,y+2+bob,2,4,C.sk2); px(x+3,y+3+bob,1,2,C.sk3); px(x+3,y+2+bob,1,1,C.sk1);
    px(x+13,y+2+bob,2,4,C.sk2); px(x+14,y+3+bob,1,2,C.sk3); px(x+14,y+2+bob,1,1,C.sk1);

    // â”€â”€ hair â”€â”€
    px(x+4,y+0+bob,10,2,C.hB);
    px(x+3,y+2+bob,2,3,C.hB);  px(x+13,y+2+bob,2,3,C.hB); // sideburns
    px(x+5,y+1+bob,8,1,C.hM);  px(x+7,y+0+bob,4,1,C.hH);  // highlight

    // â”€â”€ eyebrows â”€â”€
    px(x+5,y+1+bob,4,1,C.hB); px(x+9,y+1+bob,4,1,C.hB);

    // â”€â”€ eyes â”€â”€
    // left
    px(x+5,y+2+bob,4,3,C.eyeW);
    px(x+5,y+2+bob,1,3,C.sk3); px(x+8,y+2+bob,1,3,C.sk3);
    px(x+6,y+3+bob,2,2,C.iris); px(x+6,y+3+bob,1,1,C.pupil);
    px(x+7,y+2+bob,1,1,'#fff');
    // right
    px(x+10,y+2+bob,4,3,C.eyeW);
    px(x+10,y+2+bob,1,3,C.sk3); px(x+13,y+2+bob,1,3,C.sk3);
    px(x+11,y+3+bob,2,2,C.iris); px(x+11,y+3+bob,1,1,C.pupil);
    px(x+12,y+2+bob,1,1,'#fff');

    // â”€â”€ nose â”€â”€
    px(x+8,y+5+bob,2,1,C.sk3);
    px(x+7,y+6+bob,1,1,C.sk3); px(x+10,y+6+bob,1,1,C.sk3);

    // â”€â”€ mouth â”€â”€
    if(phase==='kiss'){
      px(x+7,y+7+bob,4,1,C.lip);
    } else {
      px(x+7,y+7+bob,4,1,C.lip); px(x+8,y+7+bob,2,1,C.lipH);
      px(x+6,y+8+bob,1,1,C.sk3); px(x+11,y+8+bob,1,1,C.sk3);
    }
  }

  // â”€â”€ Girl â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function drawGirl(phase) {
    const x = girlX;
    const y = groundY - 44;
    const happy = phase==='offer'||phase==='kiss'||phase==='heart';

    // shadow
    gx.globalAlpha=0.2; gx.fillStyle='#000';
    gx.fillRect((x+1)*S,(groundY+1)*S,14*S,S); gx.globalAlpha=1;

    // â”€â”€ heels â”€â”€
    px(x+2,y+42,3,2,C.dDk); px(x+4,y+43,5,1,C.dDk); px(x+2,y+43,1,1,C.dDk); // left
    px(x+10,y+42,3,2,C.dDk); px(x+7,y+43,5,1,C.dDk); px(x+12,y+43,1,1,C.dDk); // right
    px(x+2,y+41,5,1,C.dB); px(x+9,y+41,5,1,C.dB); // ankle strap

    // â”€â”€ bare legs â”€â”€
    px(x+3,y+35,4,7,C.sk1); px(x+3,y+35,1,7,C.sk0); px(x+6,y+35,1,7,C.sk3);
    px(x+10,y+35,4,7,C.sk1); px(x+10,y+35,1,7,C.sk0); px(x+13,y+35,1,7,C.sk3);
    // knee detail
    px(x+4,y+38,2,2,C.sk0); px(x+11,y+38,2,2,C.sk0);

    // â”€â”€ dress skirt (A-line) â”€â”€
    px(x+0,y+22,16,13,C.dB);
    px(x+0,y+22,16,3,C.dL);    // top shimmer
    px(x-2,y+28,20,7,C.dB);
    px(x-3,y+32,22,5,C.dB);    // max flare
    px(x-1,y+28,1,9,C.dDk); px(x+16,y+28,1,9,C.dDk); // side shadows
    // ruffle
    px(x-2,y+31,20,1,C.dDk);
    px(x-3,y+32,22,2,C.dHL);
    px(x-2,y+34,20,1,C.dDk);
    // shimmer lines
    px(x+2,y+23,1,10,C.dHL); px(x+8,y+23,1,10,C.dHL); px(x+13,y+23,1,10,C.dHL);

    // â”€â”€ dress bodice â”€â”€
    px(x+3,y+11,10,11,C.dB);
    px(x+3,y+11,10,3,C.dL);   // shoulder highlight
    px(x+3,y+18,10,4,C.dDk);  // waist shadow
    px(x+5,y+11,6,5,C.dHL);   // sweetheart neckline center
    px(x+4,y+13,1,3,C.dDk);   px(x+11,y+13,1,3,C.dDk); // neckline sides
    // waist band
    px(x+3,y+20,10,2,C.dDk);  px(x+4,y+20,8,1,C.dL);

    // â”€â”€ arms â”€â”€
    if(phase==='kiss'){
      px(x+1,y+12,3,8,C.sk2); px(x+1,y+12,1,8,C.sk3); px(x+1,y+12,1,1,C.sk1);
      px(x+12,y+12,3,8,C.sk2); px(x+14,y+12,1,8,C.sk3);
    } else if(phase==='heart'){
      px(x-4,y+10,5,3,C.sk2);   px(x-4,y+10,1,3,C.sk3);
      drawBouquet(x-9,y+2);
      px(x+12,y+13,3,7,C.sk2);  px(x+14,y+13,1,7,C.sk3);
    } else {
      px(x+1,y+12,3,9,C.sk2);   px(x+1,y+12,1,9,C.sk3);   px(x+3,y+12,1,9,C.sk1);
      px(x+12,y+12,3,9,C.sk2);  px(x+14,y+12,1,9,C.sk3);
    }

    // â”€â”€ neck â”€â”€
    px(x+6,y+7,4,5,C.sk2); px(x+6,y+7,1,5,C.sk3); px(x+9,y+7,1,5,C.sk1);

    // â”€â”€ head â”€â”€
    px(x+3,y+0,10,10,C.sk2);
    px(x+3,y+0,1,10,C.sk3); px(x+12,y+0,1,10,C.sk3);
    px(x+5,y+0,6,4,C.sk1);  // forehead highlight
    px(x+4,y+9,8,2,C.sk2);  // jaw
    px(x+5,y+10,6,1,C.sk3); // chin

    // ears with earrings
    px(x+2,y+3,2,4,C.sk2); px(x+2,y+4,1,2,C.sk3);
    px(x+1,y+6,2,3,C.dB);  px(x+2,y+8,1,1,C.dHL); // earring
    px(x+12,y+3,2,4,C.sk2); px(x+13,y+4,1,2,C.sk3);
    px(x+13,y+6,2,3,C.dB);  px(x+13,y+8,1,1,C.dHL);

    // â”€â”€ long dark hair â”€â”€
    px(x+3,y+0,10,3,C.hB);          // top
    px(x+1,y+2,3,16,C.hB);          // left flow
    px(x+12,y+2,3,16,C.hB);         // right flow
    px(x+1,y+17,3,5,C.hB);          // lower left
    px(x+12,y+17,3,5,C.hB);         // lower right
    px(x+2,y+6,1,10,C.hM);          // left strand highlight
    px(x+13,y+6,1,10,C.hM);
    px(x+5,y+0,2,4,C.hM);           // top center sheen
    px(x+9,y+0,2,4,C.hM);
    px(x+7,y+0,2,2,C.hH);           // specular shine
    // rose hair clip
    px(x+12,y+1,4,4,C.rDk);
    px(x+13,y+0,3,3,C.rB); px(x+14,y+0,2,2,C.rL); px(x+15,y+0,1,1,'#fff');
    px(x+12,y+4,1,1,C.stm); px(x+14,y+5,1,1,C.stm);

    // â”€â”€ eyebrows (arched) â”€â”€
    px(x+5,y+2,1,1,C.hB); px(x+6,y+1,3,1,C.hB); px(x+9,y+2,1,1,C.hB);
    px(x+9,y+2,1,1,C.hB); px(x+10,y+1,3,1,C.hB); px(x+13,y+2,1,1,C.hB);

    // â”€â”€ eyes (large + lashes) â”€â”€
    // left
    px(x+5,y+3,4,3,C.eyeW);
    px(x+5,y+3,1,3,C.sk3); px(x+8,y+3,1,3,C.sk3);
    px(x+6,y+4,2,2,C.iris); px(x+6,y+4,1,1,C.pupil);
    px(x+7,y+3,1,1,'#fff');
    // lashes left
    px(x+5,y+2,4,1,C.hB);
    px(x+4,y+3,1,1,C.hB); px(x+4,y+2,1,1,C.hB);
    px(x+9,y+3,1,1,C.hB);
    // right
    px(x+9,y+3,4,3,C.eyeW);
    px(x+9,y+3,1,3,C.sk3); px(x+12,y+3,1,3,C.sk3);
    px(x+10,y+4,2,2,C.iris); px(x+10,y+4,1,1,C.pupil);
    px(x+11,y+3,1,1,'#fff');
    // lashes right
    px(x+9,y+2,4,1,C.hB);
    px(x+8,y+3,1,1,C.hB); px(x+8,y+2,1,1,C.hB);
    px(x+13,y+3,1,1,C.hB);

    // â”€â”€ nose â”€â”€
    px(x+7,y+6,2,1,C.sk3);
    px(x+7,y+7,1,1,C.sk3); px(x+9,y+7,1,1,C.sk3);

    // â”€â”€ lips â”€â”€
    if(happy){
      px(x+6,y+8,5,1,C.lip); px(x+7,y+9,3,1,C.lip);
      px(x+7,y+8,2,1,C.lipH);
      px(x+6,y+9,1,1,C.sk3); px(x+11,y+9,1,1,C.sk3);
      px(x+5,y+9,1,1,C.sk3); px(x+12,y+9,1,1,C.sk3);
    } else {
      px(x+6,y+8,5,2,C.lip); px(x+7,y+8,2,1,C.lipH);
      px(x+6,y+9,1,1,C.sk3); px(x+11,y+9,1,1,C.sk3);
    }
  }

  // â”€â”€ Big pixel heart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function drawBigHeart(cx,cy,sz,alpha){
    gx.globalAlpha=Math.max(0,alpha);
    const p=(dx,dy,c)=>{gx.fillStyle=c||C.heartR;gx.fillRect(cx+dx*sz,cy+dy*sz,sz,sz);};
    p(1,0);p(2,0);p(4,0);p(5,0);
    p(0,1);p(1,1);p(2,1);p(3,1);p(4,1);p(5,1);p(6,1);
    p(0,2);p(1,2);p(2,2);p(3,2);p(4,2);p(5,2);p(6,2);
    p(1,3);p(2,3);p(3,3);p(4,3);p(5,3);
    p(2,4);p(3,4);p(4,4);p(3,5);
    p(2,1,C.heartP);p(1,2,C.heartP);
    gx.globalAlpha=1;
  }

  // â”€â”€ Kiss sparkle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function drawSparkle(sx,sy){
    [[0,-2],[0,2],[-2,0],[2,0],[-1,-1],[1,-1],[-1,1],[1,1]].forEach(([dx,dy])=>{
      px(sx+dx,sy+dy,1,1,'#fef9c3');
    });
    px(sx,sy,1,1,'#fff');
  }

  // â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  let mini=[], sparkleOn=false;
  function spawnMini(){
    for(let i=0;i<14;i++) mini.push({
      x:(girlX+7)*S, y:(groundY-22)*S,
      vx:(Math.random()-0.5)*3.5, vy:-(1+Math.random()*3),
      life:60, sz:Math.random()<0.5?10:14,
    });
  }

  let frame=0, boyX=4, miniSpawned=false, running=false;
  const walkTarget = girlX - 18;

  function loop(){
    if(!running){ requestAnimationFrame(loop); return; }
    const phase = frame<70?'walk': frame<120?'offer': frame<165?'kiss': frame<290?'heart':'done';

    if(phase==='walk')  boyX = 4 + (walkTarget-4)*(frame/70);
    if(phase==='kiss' && !miniSpawned){ miniSpawned=true; spawnMini(); sparkleOn=true; }
    if(phase==='done'){ frame=0; boyX=4; miniSpawned=false; mini=[]; sparkleOn=false; }

    gx.clearRect(0,0,gc.width,gc.height);
    drawBg();
    drawGirl(phase);
    drawBoy(boyX, phase, frame);

    if(sparkleOn && phase==='kiss') drawSparkle(Math.round(boyX)+14, groundY-26);

    mini.forEach(h=>{
      h.x+=h.vx; h.y+=h.vy*0.92; h.life--;
      gx.globalAlpha=Math.max(0,h.life/60);
      gx.font=`${h.sz}px serif`; gx.fillText('ğŸŒ¹',h.x,h.y);
      gx.globalAlpha=1;
    });
    mini=mini.filter(h=>h.life>0);

    if(phase==='heart'){
      const t=frame-165;
      const sz=Math.min(8,2+Math.floor(t/5));
      const rise=t*0.65;
      const alpha=t<90?1:Math.max(0,1-(t-90)/45);
      drawBigHeart((girlX+2)*S-sz*3,(groundY-30)*S-rise,sz,alpha);
    }

    frame++;
    requestAnimationFrame(loop);
  }

  const observer=new IntersectionObserver(entries=>{
    entries.forEach(e=>{ if(e.isIntersecting) running=true; });
  },{threshold:0.4});
  observer.observe(gc);
  loop();
})();

  const groundY = 46;  // 46*4=184px
  const girlX   = 92;  // 92*4=368px

  const C = {
    sky:'#120820',   skyMid:'#1e0c35',
    ground:'#2a1248', ground2:'#3b1f5e',
    grass1:'#3d2260', grass2:'#5a3490',
    skin:'#f5c8a0',  skinSh:'#d9936a',
    skinD:'#c47840', skinDSh:'#a05828',
    hair:'#1c0800',  hairHi:'#3d1200',
    hairD:'#0a0300',
    shirt:'#6d28d9', shirtSh:'#4c1d95', shirtHi:'#8b5cf6',
    pants:'#1e1040', pantsSh:'#150a30',
    shoe:'#1a1a2e',
    dress:'#f472b6', dressSh:'#db2777', dressHi:'#fda4cf',
    rose:'#f43f5e',  roseDk:'#be123c',  roseLt:'#fb7185',
    stem:'#16a34a',  stemDk:'#14532d',
    heartR:'#f43f5e', heartPk:'#fb7185',
    moon:'#fef3c7',  moonSh:'#fde68a',
    star:'#fef9c3',
    f1:'#006847', f2:'#ffffff', f3:'#ce1126',
    path:'#4a1d7a', pathAlt:'#5b2d8a',
    lip:'#c2185b',
  };

  function px(x,y,w,h,col){ gx.fillStyle=col; gx.fillRect(x*S,y*S,w*S,h*S); }

  // draw a rose bush/decoration on the ground
  function groundRose(rx, ry) {
    px(rx+1,ry+4,1,3,C.stem); px(rx+2,ry+3,1,4,C.stemDk);
    px(rx,ry+1,4,3,C.rose); px(rx+1,ry,2,1,C.roseLt);
    px(rx,ry+4,2,1,C.stem); px(rx+2,ry+5,2,1,C.stem);
  }

  function drawBg() {
    // sky gradient simulation
    for(let row=0; row<groundY; row++){
      const t = row/groundY;
      gx.fillStyle = row < groundY*0.5 ? C.sky : C.skyMid;
      gx.fillRect(0, row*S, gc.width, S);
    }
    // moon with glow
    gx.shadowColor='#fef3c7'; gx.shadowBlur=12*S;
    px(16,4,7,7,C.moon);
    px(17,3,5,1,C.moon); px(17,11,5,1,C.moon);
    px(15,6,1,3,C.moon); px(23,6,1,3,C.moon);
    px(17,5,1,1,C.moonSh); // crater
    gx.shadowBlur=0;

    // stars with twinkle
    [[5,2],[28,4],[42,1],[58,6],[70,2],[80,5],[95,3],[105,7],[112,2],[6,10],[35,9],[65,11]].forEach(([sx,sy])=>{
      px(sx,sy,1,1,C.star);
    });

    // flag
    px(114,2,2,5,C.f1); px(116,2,2,5,C.f2); px(118,2,2,5,C.f3);
    px(113,1,1,7,'#666');

    // ground layers
    gx.fillStyle=C.ground2; gx.fillRect(0,groundY*S,gc.width,gc.height-groundY*S);
    gx.fillStyle=C.ground;  gx.fillRect(0,(groundY+3)*S,gc.width,gc.height-(groundY+3)*S);
    // grass blades
    gx.fillStyle=C.grass1; gx.fillRect(0,groundY*S,gc.width,2*S);
    gx.fillStyle=C.grass2; gx.fillRect(0,(groundY+1)*S,gc.width,S);
    // subtle grass tufts
    for(let i=0;i<20;i++){
      px(i*6+2, groundY-1, 1, 2, C.grass2);
      px(i*6+4, groundY-1, 1, 1, C.grass1);
    }

    // stone path
    for(let i=0;i<14;i++){
      const alt = i%2;
      px(4+i*8, groundY+3, 5, 2, alt ? C.path : C.pathAlt);
    }

    // decorative roses on ground sides
    groundRose(2, groundY-5);
    groundRose(8, groundY-4);
    groundRose(104, groundY-5);
    groundRose(110, groundY-4);
  }

  // Detailed rose bouquet
  function drawBouquet(rx, ry) {
    // wrapping paper
    px(rx+1,ry+7,7,5,'#fdf2f8');
    px(rx+2,ry+11,5,1,C.dress);
    // stems
    px(rx+2,ry+4,1,5,C.stem); px(rx+2,ry+4,1,5,C.stemDk);
    px(rx+4,ry+3,1,6,C.stem);
    px(rx+6,ry+4,1,5,C.stem);
    // leaves
    px(rx+1,ry+6,2,1,C.stem); px(rx+5,ry+7,2,1,C.stem);
    // rose 1 (left)
    px(rx,ry+2,4,2,C.roseDk); px(rx+1,ry+1,2,1,C.rose);
    px(rx,ry+2,4,3,C.rose);   px(rx+1,ry,2,2,C.roseLt);
    // rose 2 (center, taller)
    px(rx+3,ry,4,2,C.roseDk); px(rx+4,ry-1,2,1,C.rose);
    px(rx+3,ry,4,3,C.rose);   px(rx+4,ry-2,2,2,C.roseLt);
    // rose 3 (right)
    px(rx+6,ry+2,4,2,C.roseDk); px(rx+7,ry+1,2,1,C.rose);
    px(rx+6,ry+2,4,3,C.rose);   px(rx+7,ry,2,2,C.roseLt);
  }

  // Boy character (Josue) - ~14w x 28h game units
  function drawBoy(bx, phase, f) {
    const x = Math.round(bx);
    const y = groundY - 28;
    const walk = (phase==='walk');
    const leg1 = walk ? (Math.floor(f/5)%2===0 ? 2 : 0) : 0;
    const leg2 = walk ? (Math.floor(f/5)%2===0 ? 0 : 2) : 0;

    // shadow
    gx.globalAlpha=0.3;
    gx.fillStyle='#000'; gx.fillRect((x+1)*S,(groundY+1)*S,12*S,S);
    gx.globalAlpha=1;

    // shoes
    px(x+1,y+26,5,2,C.shoe); px(x+8,y+26,5,2,C.shoe);
    px(x+1,y+27,6,1,'#111'); px(x+8,y+27,6,1,'#111');

    // legs
    px(x+2,y+18,3,8+leg1,C.pants); px(x+2,y+18,3,1,C.pantsSh);
    px(x+7,y+18,3,8+leg2,C.pants); px(x+7,y+18,3,1,C.pantsSh);

    // shirt body
    px(x+1,y+9,12,9,C.shirt);
    px(x+1,y+9,12,2,C.shirtHi);  // collar highlight
    px(x+1,y+16,12,2,C.shirtSh); // bottom shadow
    // shirt buttons
    px(x+6,y+11,1,1,C.shirtHi); px(x+6,y+13,1,1,C.shirtHi); px(x+6,y+15,1,1,C.shirtHi);

    if(phase==='kiss' || phase==='heart'){
      // left arm around girl
      px(x+11,y+10,5,3,C.skin); px(x+11,y+10,5,1,C.skinSh);
      // right arm down
      px(x+0,y+10,2,6,C.skin);
    } else if(phase==='offer'){
      // right arm raised offering bouquet
      px(x+11,y+7,2,6,C.skin); px(x+12,y+5,2,4,C.skin);
      drawBouquet(x+12,y-3);
      px(x+0,y+10,2,7,C.skin);
    } else {
      // arms swinging while walking
      px(x+0,y+10,2,6+leg2,C.skin);
      px(x+11,y+10,2,6+leg1,C.skin);
    }

    // neck
    px(x+5,y+6,4,4,C.skin); px(x+5,y+6,4,1,C.skinSh);

    // head
    px(x+3,y+0,9,7,C.skin);
    px(x+3,y+0,9,2,C.skinSh); // top shadow

    // hair (short, dark, slightly styled)
    px(x+3,y+0,9,2,C.hair);
    px(x+3,y+2,2,2,C.hair);   // sideburn left
    px(x+10,y+2,2,2,C.hair);  // sideburn right
    px(x+4,y+0,6,1,C.hairHi); // hair highlight

    // ears
    px(x+2,y+3,2,2,C.skin); px(x+11,y+3,2,2,C.skin);

    // eyes
    px(x+5,y+3,2,2,'#1a1a2e'); px(x+8,y+3,2,2,'#1a1a2e');
    px(x+5,y+3,2,1,'#fff');    px(x+8,y+3,2,1,'#fff'); // eye white top
    px(x+6,y+4,1,1,'#fff');    px(x+9,y+4,1,1,'#fff'); // glint

    // eyebrows
    px(x+5,y+2,3,1,C.hair); px(x+8,y+2,3,1,C.hair);

    // mouth
    if(phase==='kiss'){
      px(x+6,y+6,3,1,C.lip);
    } else {
      px(x+5,y+6,1,1,C.skin); px(x+6,y+6,3,1,C.lip); px(x+9,y+6,1,1,C.skin);
    }
  }

  // Girl character (Diana) - ~14w x 30h game units, Mexican, pink dress
  function drawGirl(phase) {
    const x = girlX, y = groundY - 30;
    const happy = phase==='offer'||phase==='kiss'||phase==='heart';

    // shadow
    gx.globalAlpha=0.3;
    gx.fillStyle='#000'; gx.fillRect((x+1)*S,(groundY+1)*S,12*S,S);
    gx.globalAlpha=1;

    // heels / shoes
    px(x+2,y+28,3,2,'#9d174d'); px(x+9,y+28,3,2,'#9d174d');
    px(x+4,y+29,1,1,'#7f1d1d'); px(x+11,y+29,1,1,'#7f1d1d'); // heel tip

    // dress skirt (flared)
    px(x-1,y+19,16,10,C.dress);
    px(x+0,y+19,14,10,C.dress);
    px(x+1,y+21,12,8,C.dressSh);  // inner shadow
    px(x+0,y+19,14,2,C.dressHi);  // top highlight
    // dress skirt ruffle
    px(x-2,y+24,18,3,C.dressHi);
    px(x-1,y+26,16,2,C.dress);

    // dress bodice
    px(x+3,y+10,8,10,C.dress);
    px(x+3,y+10,8,2,C.dressHi);
    px(x+3,y+17,8,3,C.dressSh);
    // belt/waist detail
    px(x+3,y+18,8,1,'#9d174d');

    // arms
    if(phase==='kiss'){
      // arms around boy's neck
      px(x+1,y+11,2,5,C.skinD);
      px(x+11,y+11,2,5,C.skinD);
      px(x-1,y+11,3,2,C.skinD);
    } else if(phase==='heart'){
      // holding bouquet (received)
      px(x-3,y+9,4,2,C.skinD);
      drawBouquet(x-8,y+2);
      px(x+11,y+11,2,5,C.skinD);
    } else {
      // arms relaxed at sides
      px(x+1,y+11,2,6,C.skinD); px(x+1,y+11,2,1,C.skinDSh);
      px(x+11,y+11,2,6,C.skinD); px(x+11,y+11,2,1,C.skinDSh);
    }

    // neck
    px(x+5,y+7,4,4,C.skinD); px(x+5,y+7,4,1,C.skinDSh);

    // head
    px(x+3,y+0,9,8,C.skinD);
    px(x+3,y+0,9,2,C.skinDSh);

    // long dark hair
    px(x+3,y+0,9,3,C.hairD);
    px(x+2,y+2,3,12,C.hairD);  // left side hair
    px(x+10,y+2,3,12,C.hairD); // right side hair
    px(x+3,y+0,2,1,C.hair);    // highlight streak left
    px(x+8,y+0,2,1,C.hair);    // highlight streak right
    // small flower/rose in hair
    px(x+10,y+1,3,2,C.rose); px(x+11,y+0,1,1,C.roseLt);
    px(x+10,y+2,1,1,C.stem);

    // ears
    px(x+2,y+4,2,2,C.skinD); px(x+11,y+4,2,2,C.skinD);
    // earrings
    px(x+2,y+6,1,2,C.heartR); px(x+12,y+6,1,2,C.heartR);

    // eyes (bigger, with lashes)
    px(x+5,y+3,2,2,'#1a1a2e'); px(x+8,y+3,2,2,'#1a1a2e');
    px(x+5,y+3,2,1,'#fff');    px(x+8,y+3,2,1,'#fff');
    px(x+6,y+4,1,1,'#fff');    px(x+9,y+4,1,1,'#fff'); // glint
    // lashes
    px(x+4,y+2,1,1,C.hairD); px(x+5,y+2,1,1,C.hairD); px(x+6,y+2,1,1,C.hairD);
    px(x+8,y+2,1,1,C.hairD); px(x+9,y+2,1,1,C.hairD); px(x+10,y+2,1,1,C.hairD);

    // eyebrows (arched)
    px(x+5,y+2,3,1,C.hairD); px(x+8,y+2,3,1,C.hairD);

    // nose
    px(x+7,y+5,1,1,C.skinDSh);

    // lips
    if(happy){
      px(x+5,y+6,1,1,C.lip); px(x+6,y+7,3,1,C.lip); px(x+9,y+6,1,1,C.lip);
      px(x+6,y+6,3,1,C.lip); // open smile
    } else {
      px(x+6,y+6,3,1,C.lip);
      px(x+5,y+7,1,1,C.lip); px(x+9,y+7,1,1,C.lip);
    }
  }

  // Pixel heart shape
  function drawBigHeart(cx, cy, sz, alpha) {
    gx.globalAlpha = Math.max(0, alpha);
    const p = (dx,dy,col) => { gx.fillStyle=col||C.heartR; gx.fillRect(cx+dx*sz,cy+dy*sz,sz,sz); };
    // outer shape
    p(1,0); p(2,0); p(4,0); p(5,0);
    p(0,1); p(1,1); p(2,1); p(3,1); p(4,1); p(5,1); p(6,1);
    p(0,2); p(1,2); p(2,2); p(3,2); p(4,2); p(5,2); p(6,2);
    p(1,3); p(2,3); p(3,3); p(4,3); p(5,3);
    p(2,4); p(3,4); p(4,4);
    p(3,5);
    // highlight
    p(2,1,C.heartPk); p(1,2,C.heartPk);
    gx.globalAlpha = 1;
  }

  // Kiss sparkle
  function drawSparkle(sx, sy) {
    gx.fillStyle = '#fef9c3';
    [[0,-2],[0,2],[-2,0],[2,0],[-1,-1],[1,-1],[-1,1],[1,1]].forEach(([dx,dy])=>{
      px(sx+dx, sy+dy, 1, 1, '#fef9c3');
    });
    px(sx, sy, 1, 1, '#fff');
  }

  // mini hearts burst
  let mini = [], sparkleOn = false;
  function spawnMini() {
    for(let i=0;i<12;i++) mini.push({
      x:(girlX+6)*S, y:(groundY-22)*S,
      vx:(Math.random()-0.5)*3, vy:-(1+Math.random()*2.5),
      life:65, size:Math.random()<0.5?8:12,
    });
  }

  // phases: 0-70 walk | 70-120 offer | 120-165 kiss | 165-290 heart | 290-320 pause â†’ loop
  let frame=0, boyX=4, miniSpawned=false, running=false;
  const walkTarget = girlX - 16;

  function loop() {
    if(!running){ requestAnimationFrame(loop); return; }
    const phase = frame<70?'walk': frame<120?'offer': frame<165?'kiss': frame<295?'heart':'done';

    if(phase==='walk')  boyX = 4 + (walkTarget-4)*(frame/70);
    if(phase==='kiss' && !miniSpawned){ miniSpawned=true; spawnMini(); sparkleOn=true; }
    if(phase==='done'){ frame=0; boyX=4; miniSpawned=false; mini=[]; sparkleOn=false; }

    gx.clearRect(0,0,gc.width,gc.height);
    drawBg();
    drawGirl(phase);
    drawBoy(boyX, phase, frame);

    // sparkle at kiss point
    if(sparkleOn && (phase==='kiss')){
      drawSparkle(Math.round(boyX)+13, groundY-24);
    }

    // mini hearts
    mini.forEach(h=>{
      h.x+=h.vx; h.y+=h.vy*0.9; h.life--;
      gx.globalAlpha=Math.max(0,h.life/65);
      gx.fillStyle=C.heartR; gx.font=`${h.size}px serif`;
      gx.fillText('ğŸŒ¹',h.x,h.y);
      gx.globalAlpha=1;
    });
    mini=mini.filter(h=>h.life>0);

    // big rising heart
    if(phase==='heart'){
      const t=frame-165;
      const sz = Math.min(8, 2+Math.floor(t/5));
      const rise = t*0.7;
      const alpha = t<80 ? 1 : Math.max(0, 1-(t-80)/45);
      const hx = (girlX+3)*S - sz*3;
      const hy = (groundY-28)*S - rise;
      drawBigHeart(hx, hy, sz, alpha);
    }

    frame++;
    requestAnimationFrame(loop);
  }

  // only start when scrolled into view
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(e => { if(e.isIntersecting) running = true; });
  }, { threshold: 0.4 });
  observer.observe(gc);

  loop();
})();
</script>

</body>
</html>
